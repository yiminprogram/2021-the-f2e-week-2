(this["webpackJsonp2021-the-f2e-week-2"]=this["webpackJsonp2021-the-f2e-week-2"]||[]).push([[0],{138:function(e,t){},171:function(e,t,n){"use strict";n.r(t);var r,i,c,o,a,s,l,j,d,b,x,h=n(0),u=n.n(h),f=n(38),m=n.n(f),p=n(16),O=n(8),g=n(13),y=n.p+"static/media/logo-light.0c6a71ad.svg",v=n(1),w=Object(O.a)("header")(r||(r=Object(p.a)(["\n  height: 76px;\n  display: flex;\n  flex-flow: row nowrap;\n  justify-content: center;\n  align-items: center;\n  background-color: ",";\n"])),(function(e){return e.theme.palette.primary.main})),k=Object(O.a)("div")(i||(i=Object(p.a)(["\n  > img {\n    height: 100%;\n    object-fit: contain;\n  }\n"]))),S=function(){return Object(v.jsx)(w,{children:Object(v.jsx)(k,{children:Object(v.jsx)("img",{src:y,alt:"logo"})})})},C=n(9),E=n(205),A=n(212),z=n(204),B=n(213),F=n(208),I=n(214),T=n(215),D=n(19),N=n(18),_=n(92),q=function(e){return Object(_.stringify)(e)},R=n(54),L=n.n(R),W=function(e,t){return{STATION_URL:"https://ptx.transportdata.tw/MOTC/v2/Bike/Station/NearBy?$spatialFilter=nearby(".concat(e,"%2C%20").concat(t,"%2C%201000)&$format=JSON"),INFO_URL:"https://ptx.transportdata.tw/MOTC/v2/Bike/Availability/NearBy?$spatialFilter=nearby(".concat(e,"%2C%20").concat(t,"%2C%201000)&$format=JSON")}},P=n(93),U=n(36),M=n.n(U),G=function(){var e=(new Date).toUTCString(),t=Object(P.HmacSHA1)("x-date: ".concat(e),"4K3HZyLebCmkAcnb8gxLJEWBpRk"),n=M.a.stringify(t);return{Authorization:'hmac username="'.concat("645498ddf8ab4b9eaf56c36297be40e2",'", algorithm="hmac-sha1", headers="x-date", signature="').concat(n,'"'),"X-Date":e}},J=n(206),Z=n(211),$=function(){var e=Object(h.useState)("station"),t=Object(C.a)(e,2),n=t[0],r=t[1];return Object(v.jsxs)(J.a,{value:n,variant:"fullWidth",TabIndicatorProps:{style:{height:"3px"}},onChange:function(e,t){r(t)},children:[Object(v.jsx)(Z.a,{icon:Object(v.jsx)(D.a,{icon:N.a}),label:"\u81ea\u884c\u8eca\u79df\u501f\u7ad9",value:"station"}),Object(v.jsx)(Z.a,{icon:Object(v.jsx)(D.a,{icon:N.g}),label:"\u81ea\u884c\u8eca\u8def\u7dda",value:"bike"}),Object(v.jsx)(Z.a,{icon:Object(v.jsx)(D.a,{icon:N.j}),label:"\u666f\u9ede",value:"attraction"})]})},H=function(e){var t=e.icon,n=e.title,r=e.onClick;return Object(v.jsx)(E.a,{title:n,placement:"right",children:Object(v.jsx)(A.a,{onClick:r,color:"primary",sx:{fontSize:{xs:"1rem",md:"1.3rem"},width:{xs:"40px",md:"50px"},height:{xs:"40px",md:"50px"}},children:Object(v.jsx)(D.a,{icon:t})})})},V=function(){var e=Object(h.useState)(!1),t=Object(C.a)(e,2),n=t[0],r=t[1],i=function(){r(!n)},c=Object(g.g)(),o=Object(h.useState)(""),a=Object(C.a)(o,2),s=a[0],l=a[1];return Object(v.jsxs)(z.a,{direction:"column",spacing:2,sx:{position:"absolute",top:0,left:{xs:n?"calc(-100vw + 56px)":0,md:n?"-500px":0},width:{xs:"calc(100vw - 56px)",md:"500px"},height:"100%",p:2,transition:"500ms ease-in-out",zIndex:1},children:[Object(v.jsxs)(B.a,{elevation:3,component:"form",sx:{display:"flex",alignItems:"center",p:1},onSubmit:function(e){e.preventDefault(),c({search:q({lat:25.02487262639445,lng:121.5689479334554})},{state:{search:!0}})},children:[Object(v.jsx)(F.a,{placeholder:"\u5730\u5740\u641c\u5c0b",sx:{color:"primary.main",flex:1,px:2},value:s,onChange:function(e){return l(e.target.value)}}),Object(v.jsx)(I.a,{type:"submit",color:"primary",children:Object(v.jsx)(D.a,{icon:N.h})})]}),Object(v.jsxs)(B.a,{sx:{bgcolor:"#fff",flexGrow:1,overflow:"auto"},elevation:3,children:[Object(v.jsx)($,{}),Object(v.jsx)(T.a,{children:Object(v.jsx)(g.a,{})})]}),Object(v.jsxs)(z.a,{direction:"column",spacing:2,sx:{position:"absolute",right:{xs:n?"-50px":"-40px",md:n?"-60px":"-50px"},top:0},children:[Object(v.jsx)(H,{icon:N.h,title:"\u641c\u5c0b\u5730\u5740",onClick:i}),Object(v.jsx)(H,{icon:N.e,title:"\u6536\u5408\u908a\u6b04",onClick:i}),Object(v.jsx)(H,{icon:N.d,title:"\u6211\u7684\u4f4d\u7f6e"})]})]})},X=n(216),K=n.p+"static/media/404.646d6db6.svg",Q=Object(O.a)("div")(c||(c=Object(p.a)(["\n  max-width: 700px;\n  margin-bottom: 3rem;\n\n  > img {\n    width: 100%;\n    height: 100%;\n    object-fit: contain;\n  }\n"]))),Y=function(){return Object(v.jsx)(X.a,{sx:{position:"relative",height:"calc(100vh - 76px)",bgcolor:"primary.light",display:"flex",justifyContent:"center",alignItems:"center",flexFlow:"column nowrap",overflow:"hidden"},children:Object(v.jsx)(Q,{children:Object(v.jsx)("img",{src:K,alt:"404"})})})},ee=n(25),te=n(209),ne=n(217),re=n(218),ie=n(219),ce=n(220),oe=n(221),ae=function(){return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(te.a,{children:Object(v.jsx)(ne.a,{sx:{width:"100%",boxShadow:"none"},children:Object(v.jsx)(re.a,{sx:{color:"primary.main"},children:Object(v.jsxs)(ie.a,{sx:{py:1},children:[Object(v.jsx)(ce.a,{variant:"h5",color:"primary",sx:{mb:2},children:"\u592a\u539f\u5ee3\u5834"}),Object(v.jsxs)(z.a,{direction:"row",spacing:2,sx:{mb:2},children:[Object(v.jsxs)(X.a,{sx:{flexGrow:1,backgroundColor:"primary.light",textAlign:"center",p:1,borderRadius:2},children:[Object(v.jsxs)(ce.a,{variant:"body1",color:"primary.dark",children:[Object(v.jsx)(D.a,{icon:N.a,fixedWidth:!0}),"\u53ef\u79df\u501f"]}),Object(v.jsx)(ce.a,{variant:"body1",color:"primary.dark",children:"43"})]}),Object(v.jsxs)(X.a,{sx:{flexGrow:1,backgroundColor:"error.light",textAlign:"center",p:1,borderRadius:2},children:[Object(v.jsxs)(ce.a,{variant:"body1",color:"error.dark",children:[Object(v.jsx)(D.a,{icon:N.f,fixedWidth:!0}),"\u53ef\u9084\u8eca"]}),Object(v.jsx)(ce.a,{variant:"body1",color:"error.dark",children:"15"})]})]}),Object(v.jsxs)(z.a,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[Object(v.jsx)(ce.a,{variant:"body1",color:"warning.main",sx:{borderColor:"warning.main",border:1,borderRadius:1,p:1},children:"\u53ef\u501f\u53ef\u9084"}),Object(v.jsxs)(ce.a,{variant:"body1",color:"primary.main",children:[Object(v.jsx)(D.a,{icon:N.b,fixedWidth:!0}),"\u6b63\u5e38\u71df\u904b"]})]})]})})})}),Object(v.jsx)(oe.a,{variant:"middle"})]})},se=function(){return Object(v.jsx)(v.Fragment,{children:Object(ee.a)(Array(5)).map((function(e,t){return Object(v.jsx)(ae,{},t)}))})},le=function(){return Object(v.jsx)("div",{children:"\u81ea\u884c\u8eca\u8def\u7dda\u5efa\u7f6e\u4e2d"})},je=function(){return Object(v.jsx)("div",{children:"\u666f\u9ede\u641c\u5c0b\u5efa\u7f6e\u4e2d"})},de=function(){return Object(v.jsxs)(X.a,{sx:{display:"flex",justifyContent:"center",alignItems:"center",flexFlow:"column nowrap",fontSize:"2rem",color:"error.main",pt:3},children:[Object(v.jsx)(D.a,{icon:N.i}),Object(v.jsx)(ce.a,{variant:"h3",color:"error.main",sx:{mt:3},children:"\u9801\u9762\u932f\u8aa4\uff0c\u8acb\u8f38\u5165\u6b63\u78ba\u7db2\u5740"})]})},be=n(98),xe=n(55),he=n(35),ue=n.n(he),fe=(n(167),n(168),n(169),n(170),function(){return Object(v.jsxs)("svg",{width:"100%",height:"100%",viewBox:"0 0 80 80",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(v.jsx)("circle",{opacity:"0.2",cx:"37.5",cy:"37.5",r:"37.5",fill:"#DE994A"}),Object(v.jsx)("circle",{opacity:"0.2",cx:"37.5",cy:"37.4999",r:"26.5",fill:"#DE994A"}),Object(v.jsxs)("g",{filter:"url(#filter0_d_38_276)",children:[Object(v.jsx)("circle",{cx:"37.5",cy:"37.5",r:"13.5",fill:"#DE994A"}),Object(v.jsx)("circle",{cx:"37.5",cy:"37.5",r:"16",stroke:"white",strokeWidth:"5"})]}),Object(v.jsx)("defs",{children:Object(v.jsxs)("filter",{id:"filter0_d_38_276",x:"3",y:"3.00003",width:"77",height:"77",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[Object(v.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),Object(v.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),Object(v.jsx)("feOffset",{dx:"4",dy:"4"}),Object(v.jsx)("feGaussianBlur",{stdDeviation:"10"}),Object(v.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),Object(v.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.4625 0 0 0 0 0.4625 0 0 0 0 0.4625 0 0 0 0.3 0"}),Object(v.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_38_276"}),Object(v.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_38_276",result:"shape"})]})})]})}),me=function(e){var t=e.quantity;return Object(v.jsxs)(X.a,{sx:{position:"relative"},children:[Object(v.jsxs)("svg",{width:"100%",height:"100%",viewBox:"0 0 58 77",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(v.jsx)("ellipse",{cx:"29",cy:"72.5",rx:"15",ry:"4.5",fill:t>5?"#A4B375":"#F27594"}),Object(v.jsx)("path",{d:"M28.8003 0C12.9207 0 0.000293201 12.9204 0.000293201 28.782C-0.104107 51.984 27.7059 71.2224 28.8003 72C28.8003 72 57.7047 51.984 57.6003 28.8C57.6003 12.9204 44.6799 0 28.8003 0ZM28.8003 43.2C20.8443 43.2 14.4003 36.756 14.4003 28.8C14.4003 20.844 20.8443 14.4 28.8003 14.4C36.7563 14.4 43.2003 20.844 43.2003 28.8C43.2003 36.756 36.7563 43.2 28.8003 43.2Z",fill:t>5?"#738047":"#E75578"}),Object(v.jsx)("circle",{cx:"29",cy:"29",r:"19",fill:"white"})]}),Object(v.jsx)(ce.a,{component:"span",sx:{fontSize:"1rem",color:t>5?"#738047":"#E75578",position:"absolute",left:"50%",top:"18%",transform:"translateX(-50%)",fontWeight:"700"},children:t})]})},pe=Object(O.a)("span")(o||(o=Object(p.a)(["\n  display: inline-flex;\n  width: 100%;\n  height: 100%;\n  border-radius: 50%;\n  justify-content: center;\n  align-items: center;\n  font-size: 1rem;\n  color: #fff;\n  background-color: #1e88e5;\n  font-weight: 700;\n  box-shadow: 0 0 0 3px #fff, 0 0 0 6px #1e88e5;\n"]))),Oe=function(e){var t=e.count;return Object(v.jsx)(X.a,{sx:{position:"relative",width:"100%",height:"100%"},children:Object(v.jsx)(pe,{children:t})})},ge=n(40),ye=ge.a.div(a||(a=Object(p.a)(["\n  width: 350px;\n  border-radius: 8px;\n  border: 2px solid #a4b375;\n  box-shadow: 0 0 20px rgba(118, 118, 118, 0.3);\n  background-color: #fff;\n  padding: 1rem 1.3rem;\n"]))),ve=ge.a.h4(s||(s=Object(p.a)(["\n  font-size: 1rem;\n  font-weight: 500;\n  color: #738047;\n  margin-bottom: 0.5rem;\n"]))),we=ge.a.div(l||(l=Object(p.a)(["\n  flex-grow: 1;\n  background-color: ",";\n  color: ",";\n  border-radius: 4px;\n  padding: 0.5rem 0;\n  text-align: center;\n"])),(function(e){var t=e.quantity;return 0===t?"#EEEEEE":t>10?"#DFE4CE":"#F7D4DD"}),(function(e){var t=e.quantity;return 0===t?"#767676":t>10?"#474F2C":"#BC3253"})),ke=ge.a.time(j||(j=Object(p.a)(["\n  flex-grow: 1;\n  color: #767676;\n  text-align: right;\n"]))),Se=ge.a.span(d||(d=Object(p.a)(["\n  font-size: 15px;\n  font-weight: 500;\n  font-family: 'Noto Sans TC';\n  padding-left: 0.3rem;\n"]))),Ce=function(e){var t=e.time,n=e.name,r=e.rentBike,i=e.returnBike;return Object(v.jsxs)(ye,{children:[Object(v.jsx)(ve,{children:n}),Object(v.jsxs)(z.a,{direction:"row",spacing:1,alignItems:"center",children:[Object(v.jsxs)(z.a,{direction:"row",spacing:1,sx:{flexGrow:3},children:[Object(v.jsxs)(we,{quantity:r,children:[Object(v.jsx)(D.a,{icon:N.a}),Object(v.jsx)(Se,{children:r})]}),Object(v.jsxs)(we,{quantity:i,children:[Object(v.jsx)(D.a,{icon:N.f}),Object(v.jsx)(Se,{children:i})]})]}),Object(v.jsxs)(ke,{children:[Object(v.jsx)(D.a,{icon:N.c}),Object(v.jsx)(Se,{children:t})]})]})]})},Ee=ue.a.divIcon({className:"user-mark",iconSize:[80,80],iconAnchor:[40,40],html:Object(xe.renderToString)(Object(v.jsx)(fe,{}))}),Ae=function(){var e=Object(g.f)(),t=Object(g.g)(),n=Number(new URLSearchParams(e.search).get("lat")),r=Number(new URLSearchParams(e.search).get("lng")),i=Object(h.useRef)(),c=Object(h.useRef)();return Object(h.useEffect)((function(){var e=ue.a.map("map",{zoomControl:!1});ue.a.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(e),e.setZoom(17),new Promise((function(e,t){navigator.geolocation.getCurrentPosition(e,t)})).then((function(t){e.setView([t.coords.latitude,t.coords.longitude],15),ue.a.marker([t.coords.latitude,t.coords.longitude],{icon:Ee}).addTo(e);var n,r,i=ue.a.markerClusterGroup({iconCreateFunction:function(e){return ue.a.divIcon({className:"cluster-icon",iconSize:[30,30],iconAnchor:[15,15],html:Object(xe.renderToString)(Object(v.jsx)(Oe,{count:e.getChildCount()}))})}});(n=t.coords.latitude,r=t.coords.longitude,L.a.all([L.a.get(W(n,r).STATION_URL,{headers:G()}),L.a.get(W(n,r).INFO_URL,{headers:G()})]).then(L.a.spread((function(e,t){return console.log(e),console.log(t),e.data.map((function(e){return{name:e.StationName.Zh_tw,lat:e.StationPosition.PositionLat,lng:e.StationPosition.PositionLon,rentBike:t.data.find((function(t){return t.StationID===e.StationID})).AvailableRentBikes,returnBike:t.data.find((function(t){return t.StationID===e.StationID})).AvailableReturnBikes,time:new Date(e.UpdateTime).toLocaleTimeString()}}))})))).then((function(e){e.forEach((function(e){var t;i.addLayer(ue.a.marker([e.lat,e.lng],{icon:(t=e.rentBike,ue.a.divIcon({className:"bike-icon",iconSize:[48,67],iconAnchor:[19,28.5],popupAnchor:[-175,-135],html:Object(xe.renderToString)(Object(v.jsx)(me,{quantity:t}))}))}).bindPopup(Object(xe.renderToString)(Object(v.jsx)(Ce,Object(be.a)({},e))),{className:"cus-popup"}))}))})),c.current=i,e.addLayer(i)})).catch((function(){}));var n,r=function(){return setTimeout((function(){t({search:q({lat:e.getCenter().lat,lng:e.getCenter().lng})})}),500)};e.on("zoom",(function(){clearTimeout(n),n=r()})),e.on("drag",(function(){clearTimeout(n),n=r()})),i.current=e}),[t]),Object(h.useEffect)((function(){i.current&&i.current.setView([n,r]),e.state&&e.state.search&&console.log("get query")}),[n,r]),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(X.a,{id:"map",sx:{position:"relative",width:{xs:"100%",lg:"120%"},height:"100%",left:0,top:0,zIndex:0}}),Object(v.jsx)(X.a,{children:Object(v.jsxs)(A.a,{children:[Object(v.jsx)(D.a,{icon:N.h}),"\u641c\u5c0b\u6b64\u5340\u57df"]})})]})},ze=Object(O.a)("section")(b||(b=Object(p.a)(["\n  position: relative;\n  width: 100vw;\n  height: calc(100vh - 76px);\n  overflow: hidden;\n"]))),Be=function(){return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(S,{}),Object(v.jsxs)(ze,{children:[Object(v.jsxs)(g.d,{children:[Object(v.jsxs)(g.b,{path:"map",element:Object(v.jsx)(V,{}),children:[Object(v.jsx)(g.b,{index:!0,element:Object(v.jsx)(de,{})}),Object(v.jsx)(g.b,{path:"station",element:Object(v.jsx)(se,{})}),Object(v.jsx)(g.b,{path:"bike",element:Object(v.jsx)(le,{})}),Object(v.jsx)(g.b,{path:"attraction",element:Object(v.jsx)(je,{})})]}),Object(v.jsx)(g.b,{path:"*",element:Object(v.jsx)(Y,{})})]}),Object(v.jsx)(Ae,{})]})]})},Fe=n(28),Ie=n(21),Te=n(210),De=Object(Fe.b)(x||(x=Object(p.a)(["\n  html,\n  body,\n  div,\n  span,\n  applet,\n  object,\n  iframe,\n  h1,\n  h2,\n  h3,\n  h4,\n  h5,\n  h6,\n  p,\n  blockquote,\n  pre,\n  a,\n  abbr,\n  acronym,\n  address,\n  big,\n  cite,\n  code,\n  del,\n  dfn,\n  em,\n  img,\n  ins,\n  kbd,\n  q,\n  s,\n  samp,\n  small,\n  strike,\n  strong,\n  sub,\n  sup,\n  tt,\n  var,\n  b,\n  u,\n  i,\n  center,\n  dl,\n  dt,\n  dd,\n  ol,\n  ul,\n  li,\n  fieldset,\n  form,\n  label,\n  legend,\n  table,\n  caption,\n  tbody,\n  tfoot,\n  thead,\n  tr,\n  th,\n  td,\n  article,\n  aside,\n  canvas,\n  details,\n  embed,\n  figure,\n  figcaption,\n  footer,\n  header,\n  hgroup,\n  menu,\n  nav,\n  output,\n  ruby,\n  section,\n  summary,\n  time,\n  mark,\n  audio,\n  video {\n    margin: 0;\n    padding: 0;\n    border: 0;\n    font-size: 100%;\n    font: inherit;\n    vertical-align: baseline;\n  }\n  article,\n  aside,\n  details,\n  figcaption,\n  figure,\n  footer,\n  header,\n  hgroup,\n  menu,\n  nav,\n  section {\n    display: block;\n  }\n  body {\n    line-height: 1;\n  }\n  ol,\n  ul {\n    list-style: none;\n  }\n  blockquote,\n  q {\n    quotes: none;\n  }\n  blockquote:before,\n  blockquote:after,\n  q:before,\n  q:after {\n    content: '';\n    content: none;\n  }\n  table {\n    border-collapse: collapse;\n    border-spacing: 0;\n  }\n\n  html,\n  body {\n    font-family: 'Noto Sans TC';\n  }\n\n  *,\n  *::before,\n  *::after {\n    box-sizing: border-box;\n  }\n"]))),Ne=n(99),_e={main:"#738047",light:"#DFE4CE",dark:"#474F2C"},qe=Object(Ne.a)({palette:{primary:_e,warning:{main:"#DE994A",light:"#FAF0E5",dark:"#C67A24"},error:{main:"#E75578",light:"#F7D4DD",dark:"#BC3253"},secondary:{main:"#9A9A9A",dark:"#767676",light:"#EEEEEE"}},typography:{fontFamily:"Noto Sans TC",h1:{color:_e.dark,fontSize:"2.448rem",fontWeight:"700"},h2:{color:_e.dark,fontSize:"2.074rem",fontWeight:"700"},h3:{color:_e.dark,fontSize:"1.728rem",fontWeight:"700"},h4:{color:_e.dark,fontSize:"1.44rem",fontWeight:"700"},h5:{color:_e.dark,fontSize:"1.2rem",fontWeight:"700"},body1:{fontSize:"1.1rem",fontWeight:"500"},button:{fontSize:"0.833rem"},caption:{fontSize:"0.694rem",fontWeight:"400"}},components:{MuiButton:{styleOverrides:{}}}}),Re=n(48);m.a.render(Object(v.jsx)(u.a.StrictMode,{children:Object(v.jsx)(Re.a,{children:Object(v.jsx)(Ie.c,{theme:qe,children:Object(v.jsxs)(Te.a,{theme:qe,children:[Object(v.jsx)(Fe.a,{styles:De}),Object(v.jsx)(Be,{})]})})})}),document.getElementById("root"))}},[[171,1,2]]]);
//# sourceMappingURL=main.bf4b378f.chunk.js.map