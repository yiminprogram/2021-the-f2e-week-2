(this["webpackJsonp2021-the-f2e-week-2"]=this["webpackJsonp2021-the-f2e-week-2"]||[]).push([[0],{125:function(n,e){},150:function(n,e,t){"use strict";t.r(e);var i,o,r,a,c,s,l,d,h,b,j=t(0),f=t.n(j),u=t(76),p=t.n(u),g=t(10),x=t(20),m=t.p+"static/media/logo-light.0c6a71ad.svg",O=t(1),y=Object(x.a)("header")(i||(i=Object(g.a)(["\n  height: 76px;\n  display: flex;\n  flex-flow: row nowrap;\n  justify-content: center;\n  align-items: center;\n  background-color: ",";\n"])),(function(n){return n.theme.palette.primary.main})),w=Object(x.a)("div")(o||(o=Object(g.a)(["\n  > img {\n    height: 100%;\n    object-fit: contain;\n  }\n"]))),v=function(){return Object(O.jsx)(y,{children:Object(O.jsx)(w,{children:Object(O.jsx)("img",{src:m,alt:"logo"})})})},k=t(81),S=t(44),C=t(5),E=t(171),A=t(168),B=t(26),z=t.n(B),F=(t(100),t(101),t(102),t(103),function(){return Object(O.jsxs)("svg",{width:"100%",height:"100%",viewBox:"0 0 80 80",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(O.jsx)("circle",{opacity:"0.2",cx:"37.5",cy:"37.5",r:"37.5",fill:"#DE994A"}),Object(O.jsx)("circle",{opacity:"0.2",cx:"37.5",cy:"37.4999",r:"26.5",fill:"#DE994A"}),Object(O.jsxs)("g",{filter:"url(#filter0_d_38_276)",children:[Object(O.jsx)("circle",{cx:"37.5",cy:"37.5",r:"13.5",fill:"#DE994A"}),Object(O.jsx)("circle",{cx:"37.5",cy:"37.5",r:"16",stroke:"white",strokeWidth:"5"})]}),Object(O.jsx)("defs",{children:Object(O.jsxs)("filter",{id:"filter0_d_38_276",x:"3",y:"3.00003",width:"77",height:"77",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[Object(O.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),Object(O.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),Object(O.jsx)("feOffset",{dx:"4",dy:"4"}),Object(O.jsx)("feGaussianBlur",{stdDeviation:"10"}),Object(O.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),Object(O.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.4625 0 0 0 0 0.4625 0 0 0 0 0.4625 0 0 0 0.3 0"}),Object(O.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_38_276"}),Object(O.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_38_276",result:"shape"})]})})]})}),T=t(172),D=function(n){var e=n.quantity;return Object(O.jsxs)(E.a,{sx:{position:"relative"},children:[Object(O.jsxs)("svg",{width:"100%",height:"100%",viewBox:"0 0 58 77",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(O.jsx)("ellipse",{cx:"29",cy:"72.5",rx:"15",ry:"4.5",fill:e>5?"#A4B375":"#F27594"}),Object(O.jsx)("path",{d:"M28.8003 0C12.9207 0 0.000293201 12.9204 0.000293201 28.782C-0.104107 51.984 27.7059 71.2224 28.8003 72C28.8003 72 57.7047 51.984 57.6003 28.8C57.6003 12.9204 44.6799 0 28.8003 0ZM28.8003 43.2C20.8443 43.2 14.4003 36.756 14.4003 28.8C14.4003 20.844 20.8443 14.4 28.8003 14.4C36.7563 14.4 43.2003 20.844 43.2003 28.8C43.2003 36.756 36.7563 43.2 28.8003 43.2Z",fill:e>5?"#738047":"#E75578"}),Object(O.jsx)("circle",{cx:"29",cy:"29",r:"19",fill:"white"})]}),Object(O.jsx)(T.a,{component:"span",sx:{fontSize:"1rem",color:e>5?"#738047":"#E75578",position:"absolute",left:"50%",top:"18%",transform:"translateX(-50%)",fontWeight:"700"},children:e})]})},I=Object(x.a)("span")(r||(r=Object(g.a)(["\n  display: inline-flex;\n  width: 100%;\n  height: 100%;\n  border-radius: 50%;\n  justify-content: center;\n  align-items: center;\n  font-size: 1rem;\n  color: #fff;\n  background-color: #1e88e5;\n  font-weight: 700;\n  box-shadow: 0 0 0 3px #fff, 0 0 0 6px #1e88e5;\n"]))),_=function(n){var e=n.count;return Object(O.jsx)(E.a,{sx:{position:"relative",width:"100%",height:"100%"},children:Object(O.jsx)(I,{children:e})})},N=t(167),q=t(36),L=t(37),R=t(28),W=R.a.div(a||(a=Object(g.a)(["\n  width: 350px;\n  border-radius: 8px;\n  border: 2px solid #a4b375;\n  box-shadow: 0 0 20px rgba(118, 118, 118, 0.3);\n  background-color: #fff;\n  padding: 1rem 1.3rem;\n"]))),M=R.a.h4(c||(c=Object(g.a)(["\n  font-size: 1rem;\n  font-weight: 500;\n  color: #738047;\n  margin-bottom: 0.5rem;\n"]))),U=R.a.div(s||(s=Object(g.a)(["\n  flex-grow: 1;\n  background-color: ",";\n  color: ",";\n  border-radius: 4px;\n  padding: 0.5rem 0;\n  text-align: center;\n"])),(function(n){var e=n.quantity;return 0===e?"#EEEEEE":e>10?"#DFE4CE":"#F7D4DD"}),(function(n){var e=n.quantity;return 0===e?"#767676":e>10?"#474F2C":"#BC3253"})),P=R.a.time(l||(l=Object(g.a)(["\n  flex-grow: 1;\n  color: #767676;\n  text-align: right;\n"]))),G=R.a.span(d||(d=Object(g.a)(["\n  font-size: 15px;\n  font-weight: 500;\n  font-family: 'Noto Sans TC';\n  padding-left: 0.3rem;\n"]))),J=function(n){var e=n.time,t=n.name,i=n.rentBike,o=n.returnBike;return Object(O.jsxs)(W,{children:[Object(O.jsx)(M,{children:t}),Object(O.jsxs)(N.a,{direction:"row",spacing:1,alignItems:"center",children:[Object(O.jsxs)(N.a,{direction:"row",spacing:1,sx:{flexGrow:3},children:[Object(O.jsxs)(U,{quantity:i,children:[Object(O.jsx)(q.a,{icon:L.a}),Object(O.jsx)(G,{children:i})]}),Object(O.jsxs)(U,{quantity:o,children:[Object(O.jsx)(q.a,{icon:L.c}),Object(O.jsx)(G,{children:o})]})]}),Object(O.jsxs)(P,{children:[Object(O.jsx)(q.a,{icon:L.b}),Object(O.jsx)(G,{children:e})]})]})]})},Z=t(83),$=t(46),H=t.n($),X=function(n,e){return{STATION_URL:"https://ptx.transportdata.tw/MOTC/v2/Bike/Station/NearBy?$spatialFilter=nearby(".concat(n,"%2C%20").concat(e,"%2C%201000)&$format=JSON"),INFO_URL:"https://ptx.transportdata.tw/MOTC/v2/Bike/Availability/NearBy?$spatialFilter=nearby(".concat(n,"%2C%20").concat(e,"%2C%201000)&$format=JSON")}},K=t(84),V=t(27),Q=t.n(V),Y=function(){var n=(new Date).toUTCString(),e=Object(K.HmacSHA1)("x-date: ".concat(n),"4K3HZyLebCmkAcnb8gxLJEWBpRk"),t=Q.a.stringify(e);return{Authorization:'hmac username="'.concat("645498ddf8ab4b9eaf56c36297be40e2",'", algorithm="hmac-sha1", headers="x-date", signature="').concat(t,'"'),"X-Date":n}},nn=z.a.divIcon({className:"user-mark",iconSize:[80,80],iconAnchor:[40,40],html:Object(S.renderToString)(Object(O.jsx)(F,{}))}),en=function(){var n=Object(C.d)(),e=Object(j.useRef)(),t=Object(j.useRef)();return Object(j.useEffect)((function(){var i=z.a.map("map",{zoomControl:!1});z.a.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(i),i.setZoom(15),new Promise((function(n,e){navigator.geolocation.getCurrentPosition(n,e)})).then((function(n){i.setView([n.coords.latitude,n.coords.longitude],15),z.a.marker([n.coords.latitude,n.coords.longitude],{icon:nn}).addTo(i);var e,o,r=z.a.markerClusterGroup({iconCreateFunction:function(n){return z.a.divIcon({className:"cluster-icon",iconSize:[30,30],iconAnchor:[15,15],html:Object(S.renderToString)(Object(O.jsx)(_,{count:n.getChildCount()}))})}});(e=n.coords.latitude,o=n.coords.longitude,H.a.all([H.a.get(X(e,o).STATION_URL,{headers:Y()}),H.a.get(X(e,o).INFO_URL,{headers:Y()})]).then(H.a.spread((function(n,e){return console.log(n),console.log(e),n.data.map((function(n){return{name:n.StationName.Zh_tw,lat:n.StationPosition.PositionLat,lng:n.StationPosition.PositionLon,rentBike:e.data.find((function(e){return e.StationID===n.StationID})).AvailableRentBikes,returnBike:e.data.find((function(e){return e.StationID===n.StationID})).AvailableReturnBikes,time:new Date(n.UpdateTime).toLocaleTimeString()}}))})))).then((function(n){n.forEach((function(n){var e;r.addLayer(z.a.marker([n.lat,n.lng],{icon:(e=n.rentBike,z.a.divIcon({className:"bike-icon",iconSize:[48,67],iconAnchor:[19,28.5],popupAnchor:[-175,-135],html:Object(S.renderToString)(Object(O.jsx)(D,{quantity:e}))}))}).bindPopup(Object(S.renderToString)(Object(O.jsx)(J,Object(k.a)({},n))),{className:"cus-popup"}))}))})),t.current=r,i.addLayer(r)})).catch((function(){}));var o,r=function(){return setTimeout((function(){var e;n({search:(e={lat:i.getCenter().lat,lng:i.getCenter().lng},Object(Z.stringify)(e))})}),500)};i.on("zoom",(function(){clearTimeout(o),o=r()})),i.on("drag",(function(){clearTimeout(o),o=r()})),e.current=i}),[]),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(E.a,{id:"map",sx:{position:"relative",width:{xs:"100%",lg:"120%"},height:"100%",left:0,top:0,zIndex:0}}),Object(O.jsx)(E.a,{children:Object(O.jsxs)(A.a,{children:[Object(O.jsx)(q.a,{icon:L.d}),"\u641c\u5c0b\u6b64\u5340\u57df"]})})]})},tn=Object(x.a)("section")(h||(h=Object(g.a)(["\n  position: relative;\n  width: 100vw;\n  height: calc(100vh - 76px);\n  overflow: hidden;\n"]))),on=function(){return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(v,{}),Object(O.jsx)(tn,{children:Object(O.jsx)(en,{})})]})},rn=t(24),an=t(170),cn=Object(rn.b)(b||(b=Object(g.a)(["\n  html,\n  body,\n  div,\n  span,\n  applet,\n  object,\n  iframe,\n  h1,\n  h2,\n  h3,\n  h4,\n  h5,\n  h6,\n  p,\n  blockquote,\n  pre,\n  a,\n  abbr,\n  acronym,\n  address,\n  big,\n  cite,\n  code,\n  del,\n  dfn,\n  em,\n  img,\n  ins,\n  kbd,\n  q,\n  s,\n  samp,\n  small,\n  strike,\n  strong,\n  sub,\n  sup,\n  tt,\n  var,\n  b,\n  u,\n  i,\n  center,\n  dl,\n  dt,\n  dd,\n  ol,\n  ul,\n  li,\n  fieldset,\n  form,\n  label,\n  legend,\n  table,\n  caption,\n  tbody,\n  tfoot,\n  thead,\n  tr,\n  th,\n  td,\n  article,\n  aside,\n  canvas,\n  details,\n  embed,\n  figure,\n  figcaption,\n  footer,\n  header,\n  hgroup,\n  menu,\n  nav,\n  output,\n  ruby,\n  section,\n  summary,\n  time,\n  mark,\n  audio,\n  video {\n    margin: 0;\n    padding: 0;\n    border: 0;\n    font-size: 100%;\n    font: inherit;\n    vertical-align: baseline;\n  }\n  article,\n  aside,\n  details,\n  figcaption,\n  figure,\n  footer,\n  header,\n  hgroup,\n  menu,\n  nav,\n  section {\n    display: block;\n  }\n  body {\n    line-height: 1;\n  }\n  ol,\n  ul {\n    list-style: none;\n  }\n  blockquote,\n  q {\n    quotes: none;\n  }\n  blockquote:before,\n  blockquote:after,\n  q:before,\n  q:after {\n    content: '';\n    content: none;\n  }\n  table {\n    border-collapse: collapse;\n    border-spacing: 0;\n  }\n\n  html,\n  body {\n    font-family: 'Noto Sans TC';\n  }\n\n  *,\n  *::before,\n  *::after {\n    box-sizing: border-box;\n  }\n"]))),sn=t(85),ln={main:"#738047",light:"#DFE4CE",dark:"#474F2C"},dn=Object(sn.a)({palette:{primary:ln,warning:{main:"#DE994A",light:"#FAF0E5",dark:"#C67A24"},error:{main:"#E75578",light:"#F7D4DD",dark:"#BC3253"},secondary:{main:"#9A9A9A",dark:"#767676",light:"#EEEEEE"}},typography:{fontFamily:"Noto Sans TC",h1:{color:ln.dark,fontSize:"2.448rem",fontWeight:"700"},h2:{color:ln.dark,fontSize:"2.074rem",fontWeight:"700"},h3:{color:ln.dark,fontSize:"1.728rem",fontWeight:"700"},h4:{color:ln.dark,fontSize:"1.44rem",fontWeight:"700"},h5:{color:ln.dark,fontSize:"1.2rem",fontWeight:"700"},body1:{fontSize:"1.1rem",fontWeight:"500"},button:{fontSize:"0.833rem"},caption:{fontSize:"0.694rem",fontWeight:"400"}},components:{MuiButton:{styleOverrides:{}}}}),hn=t(61);p.a.render(Object(O.jsx)(f.a.StrictMode,{children:Object(O.jsx)(hn.a,{children:Object(O.jsxs)(an.a,{theme:dn,children:[Object(O.jsx)(rn.a,{styles:cn}),Object(O.jsx)(on,{})]})})}),document.getElementById("root"))}},[[150,1,2]]]);
//# sourceMappingURL=main.99fc920a.chunk.js.map