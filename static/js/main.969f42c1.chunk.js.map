{"version":3,"sources":["assets/logo/logo-light.svg","components/Header.tsx","utils/getQueryString.ts","utils/getAuthorizationHeader.ts","utils/getStation.ts","components/NavTab.tsx","components/UserMark.tsx","components/BikeMark.tsx","components/ClusterMark.tsx","components/PopCard.tsx","components/Map.tsx","utils/getUserPosition.ts","views/Home.tsx","assets/image/404.svg","views/ErrorPage.tsx","components/StationCard.tsx","views/Station.tsx","assets/image/fix.svg","views/Bike.tsx","views/Attractions.tsx","App.tsx","style/global.tsx","style/theme.ts","index.tsx"],"names":["HeaderBar","styled","theme","palette","primary","main","Logo","Header","src","logoLight","alt","getQueryString","obj","stringify","getAuthorizationHeader","GMTString","Date","toUTCString","HASH","HmacSHA1","process","HMAC","Base64","Authorization","getUrl","city","STATION_URL","INFO_URL","NavTab","navigation","useNavigate","useState","value","setValue","Tabs","variant","TabIndicatorProps","style","height","onChange","event","newValue","pathname","Tab","icon","faBicycle","label","faRoute","faUmbrellaBeach","UserMark","width","viewBox","fill","xmlns","opacity","cx","cy","r","filter","stroke","strokeWidth","id","x","y","filterUnits","colorInterpolationFilters","floodOpacity","result","in","type","values","dx","dy","stdDeviation","in2","operator","mode","BikeMark","quantity","Box","sx","position","rx","ry","d","Typography","component","fontSize","color","left","top","transform","fontWeight","Circle","ClusterMark","count","Container","div","Title","h4","Item","Time","time","ItemText","span","PopCard","name","rentBike","returnBike","Stack","direction","spacing","alignItems","flexGrow","faParking","faClock","UserIcon","L","divIcon","className","iconSize","iconAnchor","html","renderToString","BikeIcon","popupAnchor","Map","data","location","useLocation","lat","Number","URLSearchParams","search","get","lng","mapRef","useRef","bikeMarkGroupRef","bikeMarkRef","useEffect","map","zoomControl","setZoom","tileLayer","attribution","addTo","setUserPosition","user","setView","marker","Promise","res","rej","navigator","geolocation","getCurrentPosition","then","coords","latitude","longitude","catch","timer","getMapCenter","setTimeout","getCenter","on","clearTimeout","current","removeLayer","markers","markerClusterGroup","iconCreateFunction","cluster","getChildCount","markerArr","forEach","ele","mark","bindPopup","addLayer","push","state","getLatLng","openPopup","xs","lg","zIndex","Fab","faSearch","SidebarIcon","title","onClick","Tooltip","placement","md","Home","handleData","setData","setCity","hide","setHide","handleHide","query","setQuery","p","transition","Paper","elevation","display","onSubmit","e","preventDefault","axios","all","headers","spread","station","info","StationName","Zh_tw","includes","StationAddress","StationID","StationPosition","PositionLat","PositionLon","find","ele2","AvailableRentBikes","AvailableReturnBikes","UpdateTime","toLocaleTimeString","status","ServiceStatus","getStation","TextField","select","flex","target","stationCity","MenuItem","InputBase","placeholder","px","required","IconButton","bgcolor","overflow","List","right","faExchangeAlt","faCrosshairs","ImageContainer","ErrorPage","justifyContent","flexFlow","PageNotFound","StationCard","ListItem","Card","boxShadow","CardActionArea","CardContent","py","mb","backgroundColor","textAlign","borderRadius","fixedWidth","borderColor","border","faCheckCircle","Divider","Station","key","Image","Bike","fix","Attraction","Page","App","path","element","index","global","css","light","dark","createTheme","warning","error","secondary","typography","fontFamily","h1","h2","h3","h5","body1","button","caption","components","MuiButton","styleOverrides","ReactDOM","render","StrictMode","ThemeProvider","styles","document","getElementById"],"mappings":"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","file":"static/js/main.969f42c1.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo-light.0c6a71ad.svg\";","import { styled } from '@mui/material';\nimport logoLight from '../assets/logo/logo-light.svg';\n\nconst HeaderBar = styled('header')`\n  height: 76px;\n  display: flex;\n  flex-flow: row nowrap;\n  justify-content: center;\n  align-items: center;\n  background-color: ${({ theme }) => theme.palette.primary.main};\n`;\n\nconst Logo = styled('div')`\n  > img {\n    height: 100%;\n    object-fit: contain;\n  }\n`;\n\nconst Header = () => {\n  return (\n    <HeaderBar>\n      <Logo>\n        <img src={logoLight} alt=\"logo\" />\n      </Logo>\n    </HeaderBar>\n  );\n};\n\nexport default Header;\n","import { stringify } from 'querystring';\n\nexport const getQueryString = (obj: any): string => {\n  return stringify(obj);\n};\n","import { HmacSHA1 } from 'crypto-js';\nimport Base64 from 'crypto-js/enc-base64';\n\nexport const getAuthorizationHeader = () => {\n  const APP_ID = process.env.REACT_APP_APP_ID;\n  const APP_KEY = process.env.REACT_APP_APP_KEY!;\n\n  const GMTString = new Date().toUTCString();\n\n  const HASH = HmacSHA1(`x-date: ${GMTString}`, APP_KEY);\n\n  const HMAC = Base64.stringify(HASH);\n\n  const Authorization = `hmac username=\"${APP_ID}\", algorithm=\"hmac-sha1\", headers=\"x-date\", signature=\"${HMAC}\"`;\n\n  return { Authorization, 'X-Date': GMTString };\n};\n","import axios from 'axios';\nimport { getAuthorizationHeader } from '.';\n\ntype TBikeData = {\n  id: string;\n  name: string;\n  lat: number;\n  lng: number;\n  rentBike: number;\n  returnBike: number;\n  time: string;\n  status: number;\n};\n\ntype TName = {\n  Zh_tw: string;\n  En: string;\n};\n\ntype TRemoteStation = {\n  StationID: string;\n  StationName: TName;\n  UpdateTime: string;\n  StationPosition: {\n    PositionLon: number;\n    PositionLat: number;\n  };\n  StationAddress: TName;\n};\n\ntype TRmoteStateInfo = {\n  StationID: string;\n  AvailableRentBikes: number;\n  AvailableReturnBikes: number;\n  ServiceStatus: number;\n};\n\nconst getUrl = (city: string) => {\n  return {\n    STATION_URL: `https://ptx.transportdata.tw/MOTC/v2/Bike/Station/${city}?$format=JSON`,\n    INFO_URL: `https://ptx.transportdata.tw/MOTC/v2/Bike/Availability/${city}?$format=JSON`,\n  };\n};\n\ntype TQuery = {\n  city: string;\n  query: string;\n};\n\nexport const getStation = ({ city, query }: TQuery): Promise<TBikeData[]> => {\n  return axios\n    .all([\n      axios.get(getUrl(city).STATION_URL, {\n        headers: getAuthorizationHeader(),\n      }),\n      axios.get(getUrl(city).INFO_URL, {\n        headers: getAuthorizationHeader(),\n      }),\n    ])\n    .then(\n      axios.spread((station, info) => {\n        const data: TBikeData[] = [];\n        station.data.forEach((ele: TRemoteStation) => {\n          if (\n            ele.StationName.Zh_tw.includes(query) ||\n            ele.StationAddress.Zh_tw.includes(query)\n          ) {\n            data.push({\n              id: ele.StationID,\n              name: ele.StationName.Zh_tw,\n              lat: ele.StationPosition.PositionLat,\n              lng: ele.StationPosition.PositionLon,\n              rentBike: info.data.find(\n                (ele2: TRmoteStateInfo) => ele2.StationID === ele.StationID,\n              ).AvailableRentBikes,\n              returnBike: info.data.find(\n                (ele2: TRmoteStateInfo) => ele2.StationID === ele.StationID,\n              ).AvailableReturnBikes,\n              time: new Date(ele.UpdateTime).toLocaleTimeString(),\n              status: info.data.find(\n                (ele2: TRmoteStateInfo) => ele2.StationID === ele.StationID,\n              ).ServiceStatus,\n            });\n          }\n        });\n        return data;\n      }),\n    );\n};\n","import { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Tabs, Tab } from '@mui/material';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport {\n  faBicycle,\n  faRoute,\n  faUmbrellaBeach,\n} from '@fortawesome/free-solid-svg-icons';\n\nconst NavTab = () => {\n  const navigation = useNavigate();\n  const [value, setValue] = useState('station');\n\n  const handleChange = (event: React.SyntheticEvent, newValue: string) => {\n    setValue(newValue);\n    navigation({ pathname: newValue });\n  };\n\n  return (\n    <Tabs\n      value={value}\n      variant=\"fullWidth\"\n      TabIndicatorProps={{ style: { height: '3px' } }}\n      onChange={handleChange}\n    >\n      <Tab\n        icon={<FontAwesomeIcon icon={faBicycle} />}\n        label=\"自行車租借站\"\n        value=\"station\"\n      />\n      <Tab\n        icon={<FontAwesomeIcon icon={faRoute} />}\n        label=\"自行車路線\"\n        value=\"bike\"\n      />\n      <Tab\n        icon={<FontAwesomeIcon icon={faUmbrellaBeach} />}\n        label=\"景點\"\n        value=\"attraction\"\n      />\n    </Tabs>\n  );\n};\n\nexport default NavTab;\n","const UserMark = () => {\n  return (\n    <svg\n      width=\"100%\"\n      height=\"100%\"\n      viewBox=\"0 0 80 80\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <circle opacity=\"0.2\" cx=\"37.5\" cy=\"37.5\" r=\"37.5\" fill=\"#DE994A\" />\n      <circle opacity=\"0.2\" cx=\"37.5\" cy=\"37.4999\" r=\"26.5\" fill=\"#DE994A\" />\n      <g filter=\"url(#filter0_d_38_276)\">\n        <circle cx=\"37.5\" cy=\"37.5\" r=\"13.5\" fill=\"#DE994A\" />\n        <circle cx=\"37.5\" cy=\"37.5\" r=\"16\" stroke=\"white\" strokeWidth=\"5\" />\n      </g>\n      <defs>\n        <filter\n          id=\"filter0_d_38_276\"\n          x=\"3\"\n          y=\"3.00003\"\n          width=\"77\"\n          height=\"77\"\n          filterUnits=\"userSpaceOnUse\"\n          colorInterpolationFilters=\"sRGB\"\n        >\n          <feFlood floodOpacity=\"0\" result=\"BackgroundImageFix\" />\n          <feColorMatrix\n            in=\"SourceAlpha\"\n            type=\"matrix\"\n            values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0\"\n            result=\"hardAlpha\"\n          />\n          <feOffset dx=\"4\" dy=\"4\" />\n          <feGaussianBlur stdDeviation=\"10\" />\n          <feComposite in2=\"hardAlpha\" operator=\"out\" />\n          <feColorMatrix\n            type=\"matrix\"\n            values=\"0 0 0 0 0.4625 0 0 0 0 0.4625 0 0 0 0 0.4625 0 0 0 0.3 0\"\n          />\n          <feBlend\n            mode=\"normal\"\n            in2=\"BackgroundImageFix\"\n            result=\"effect1_dropShadow_38_276\"\n          />\n          <feBlend\n            mode=\"normal\"\n            in=\"SourceGraphic\"\n            in2=\"effect1_dropShadow_38_276\"\n            result=\"shape\"\n          />\n        </filter>\n      </defs>\n    </svg>\n  );\n};\n\nexport default UserMark;\n","import { Box, Typography } from '@mui/material';\n\ntype TProps = {\n  quantity: number;\n};\n\nconst BikeMark = ({ quantity }: TProps) => {\n  return (\n    <Box sx={{ position: 'relative' }}>\n      <svg\n        width=\"100%\"\n        height=\"100%\"\n        viewBox=\"0 0 58 77\"\n        fill=\"none\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n      >\n        <ellipse\n          cx=\"29\"\n          cy=\"72.5\"\n          rx=\"15\"\n          ry=\"4.5\"\n          fill={quantity > 5 ? '#A4B375' : '#F27594'}\n        />\n        <path\n          d=\"M28.8003 0C12.9207 0 0.000293201 12.9204 0.000293201 28.782C-0.104107 51.984 27.7059 71.2224 28.8003 72C28.8003 72 57.7047 51.984 57.6003 28.8C57.6003 12.9204 44.6799 0 28.8003 0ZM28.8003 43.2C20.8443 43.2 14.4003 36.756 14.4003 28.8C14.4003 20.844 20.8443 14.4 28.8003 14.4C36.7563 14.4 43.2003 20.844 43.2003 28.8C43.2003 36.756 36.7563 43.2 28.8003 43.2Z\"\n          fill={quantity > 5 ? '#738047' : '#E75578'}\n        />\n        <circle cx=\"29\" cy=\"29\" r=\"19\" fill=\"white\" />\n      </svg>\n      <Typography\n        component=\"span\"\n        sx={{\n          fontSize: '1rem',\n          color: quantity > 5 ? '#738047' : '#E75578',\n          position: 'absolute',\n          left: '50%',\n          top: '18%',\n          transform: 'translateX(-50%)',\n          fontWeight: '700',\n        }}\n      >\n        {quantity}\n      </Typography>\n    </Box>\n  );\n};\n\nexport default BikeMark;\n","import { Box, styled } from '@mui/material';\n\nconst Circle = styled('span')`\n  display: inline-flex;\n  width: 100%;\n  height: 100%;\n  border-radius: 50%;\n  justify-content: center;\n  align-items: center;\n  font-size: 1rem;\n  color: #fff;\n  background-color: #1e88e5;\n  font-weight: 700;\n  box-shadow: 0 0 0 3px #fff, 0 0 0 6px #1e88e5;\n`;\n\ntype TProps = {\n  count: number;\n};\n\nconst ClusterMark = ({ count }: TProps) => {\n  return (\n    <Box sx={{ position: 'relative', width: '100%', height: '100%' }}>\n      <Circle>{count}</Circle>\n    </Box>\n  );\n};\n\nexport default ClusterMark;\n","import { Stack } from '@mui/material';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport {\n  faClock,\n  faBicycle,\n  faParking,\n} from '@fortawesome/free-solid-svg-icons';\nimport styled from '@emotion/styled';\n\ntype TStyle = {\n  quantity: number;\n};\n\nconst Container = styled.div`\n  width: 350px;\n  border-radius: 8px;\n  border: 2px solid #a4b375;\n  box-shadow: 0 0 20px rgba(118, 118, 118, 0.3);\n  background-color: #fff;\n  padding: 1rem 1.3rem;\n`;\n\nconst Title = styled.h4`\n  font-size: 1rem;\n  font-weight: 500;\n  color: #738047;\n  margin-bottom: 0.5rem;\n`;\n\nconst Item = styled.div<TStyle>`\n  flex-grow: 1;\n  background-color: ${({ quantity }) =>\n    quantity === 0 ? '#EEEEEE' : quantity > 10 ? '#DFE4CE' : '#F7D4DD'};\n  color: ${({ quantity }) =>\n    quantity === 0 ? '#767676' : quantity > 10 ? '#474F2C' : '#BC3253'};\n  border-radius: 4px;\n  padding: 0.5rem 0;\n  text-align: center;\n`;\n\nconst Time = styled.time`\n  flex-grow: 1;\n  color: #767676;\n  text-align: right;\n`;\n\nconst ItemText = styled.span`\n  font-size: 15px;\n  font-weight: 500;\n  font-family: 'Noto Sans TC';\n  padding-left: 0.3rem;\n`;\n\ntype TBikeData = {\n  name: string;\n  lat: number;\n  lng: number;\n  rentBike: number;\n  returnBike: number;\n  time: string;\n};\n\nconst PopCard = ({ time, name, rentBike, returnBike }: TBikeData) => {\n  return (\n    <Container>\n      <Title>{name}</Title>\n      <Stack direction=\"row\" spacing={1} alignItems=\"center\">\n        <Stack direction=\"row\" spacing={1} sx={{ flexGrow: 3 }}>\n          <Item quantity={rentBike}>\n            <FontAwesomeIcon icon={faBicycle} />\n            <ItemText>{rentBike}</ItemText>\n          </Item>\n          <Item quantity={returnBike}>\n            <FontAwesomeIcon icon={faParking} />\n            <ItemText>{returnBike}</ItemText>\n          </Item>\n        </Stack>\n        <Time>\n          <FontAwesomeIcon icon={faClock} />\n          <ItemText>{time}</ItemText>\n        </Time>\n      </Stack>\n    </Container>\n  );\n};\n\nexport default PopCard;\n","import { useEffect, useRef } from 'react';\nimport { renderToString } from 'react-dom/server';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { Box, Fab } from '@mui/material';\nimport L from 'leaflet';\nimport 'leaflet.markercluster';\nimport 'leaflet/dist/leaflet.css';\nimport 'leaflet.markercluster/dist/MarkerCluster.css';\nimport 'leaflet.markercluster/dist/MarkerCluster.Default.css';\nimport UserMark from '../components/UserMark';\nimport BikeMark from '../components/BikeMark';\nimport ClusterMark from './ClusterMark';\nimport PopCard from './PopCard';\nimport { getQueryString, getUserPosition, getNearByStation } from '../utils';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faSearch } from '@fortawesome/free-solid-svg-icons';\n\n// map setting\nconst OSMUrl = 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';\n\nconst attribution =\n  '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors';\n\nconst UserIcon = L.divIcon({\n  className: 'user-mark',\n  iconSize: [80, 80],\n  iconAnchor: [40, 40],\n  html: renderToString(<UserMark />),\n});\n\nconst BikeIcon = (quantity: number) => {\n  return L.divIcon({\n    className: 'bike-icon',\n    iconSize: [48, 67],\n    iconAnchor: [19, 28.5],\n    popupAnchor: [-175, -135],\n    html: renderToString(<BikeMark quantity={quantity} />),\n  });\n};\n\ntype TBikeData = {\n  id: string;\n  name: string;\n  lat: number;\n  lng: number;\n  rentBike: number;\n  returnBike: number;\n  time: string;\n  status: number;\n};\n\ntype TProps = {\n  data: TBikeData[] | null;\n};\n\nconst Map = ({ data }: TProps) => {\n  // router\n  const location = useLocation();\n  const navigation = useNavigate();\n\n  // search string\n  const lat = Number(new URLSearchParams(location.search).get('lat'));\n  const lng = Number(new URLSearchParams(location.search).get('lng'));\n\n  // map state\n  const mapRef = useRef<L.Map>();\n  const bikeMarkGroupRef = useRef<L.MarkerClusterGroup>();\n  const bikeMarkRef = useRef<L.Marker<any>[]>([]);\n\n  // map first render\n  useEffect(() => {\n    // init map\n    const map = L.map('map', { zoomControl: false }).setZoom(15);\n    L.tileLayer(OSMUrl, { attribution }).addTo(map);\n\n    // set user position & mark\n    const setUserPosition = (lat: number, lng: number, user: boolean) => {\n      map.setView([lat, lng], 15);\n      if (user) {\n        L.marker([lat, lng], {\n          icon: UserIcon,\n        }).addTo(map);\n      }\n    };\n\n    // get nearby station & set mark\n    const setStation = (lat: number, lng: number) => {\n      // defined markers cluster\n      const markers = L.markerClusterGroup({\n        iconCreateFunction: (cluster) => {\n          return L.divIcon({\n            className: 'cluster-icon',\n            iconSize: [30, 30],\n            iconAnchor: [15, 15],\n            html: renderToString(\n              <ClusterMark count={cluster.getChildCount()} />,\n            ),\n          });\n        },\n      });\n\n      // fetch bike station\n      getNearByStation(lat, lng).then((res) => {\n        res.forEach((ele) => {\n          markers.addLayer(\n            L.marker([ele.lat, ele.lng], {\n              icon: BikeIcon(ele.rentBike),\n            }).bindPopup(renderToString(<PopCard {...ele} />), {\n              className: 'cus-popup',\n            }),\n          );\n        });\n      });\n      bikeMarkGroupRef.current = markers;\n      map.addLayer(markers);\n    };\n\n    getUserPosition()\n      .then((res) => {\n        // client gps open\n        setUserPosition(res.coords.latitude, res.coords.longitude, true);\n      })\n      .catch(() => {\n        // client gps close\n        const lat = 25.0333836;\n        const lng = 121.5633739;\n        setUserPosition(lat, lng, false);\n      });\n\n    // get map center position\n    const getMapCenter = () => {\n      return setTimeout(() => {\n        navigation({\n          search: getQueryString({\n            lat: map.getCenter().lat,\n            lng: map.getCenter().lng,\n          }),\n        });\n      }, 500);\n    };\n\n    // control map event\n    let timer: NodeJS.Timeout;\n    map.on('zoom', () => {\n      clearTimeout(timer);\n      timer = getMapCenter();\n    });\n    map.on('drag', () => {\n      clearTimeout(timer);\n      timer = getMapCenter();\n    });\n\n    mapRef.current = map;\n  }, []);\n\n  useEffect(() => {\n    if (!data) return;\n    if (mapRef.current && bikeMarkGroupRef.current) {\n      mapRef.current.removeLayer(bikeMarkGroupRef.current);\n    }\n    if (mapRef.current) {\n      const markers = L.markerClusterGroup({\n        iconCreateFunction: (cluster) => {\n          return L.divIcon({\n            className: 'cluster-icon',\n            iconSize: [30, 30],\n            iconAnchor: [15, 15],\n            html: renderToString(\n              <ClusterMark count={cluster.getChildCount()} />,\n            ),\n          });\n        },\n      });\n\n      const markerArr: L.Marker<any>[] = [];\n\n      data.forEach((ele) => {\n        const mark = L.marker([ele.lat, ele.lng], {\n          icon: BikeIcon(ele.rentBike),\n        }).bindPopup(renderToString(<PopCard {...ele} />), {\n          className: 'cus-popup',\n        });\n        markers.addLayer(mark);\n        markerArr.push(mark);\n      });\n      bikeMarkRef.current = markerArr;\n      bikeMarkGroupRef.current = markers;\n      mapRef.current.addLayer(markers);\n    }\n  }, [data]);\n\n  useEffect(() => {\n    if (mapRef.current && location.state && location.state.search) {\n      bikeMarkRef.current.forEach((ele) => {\n        if (ele.getLatLng().lat === lat) {\n          ele.openPopup();\n        }\n      });\n      mapRef.current.setView([lat, lng], 20);\n    }\n  }, [lat, lng, location]);\n\n  return (\n    <>\n      <Box\n        id=\"map\"\n        sx={{\n          position: 'relative',\n          width: {\n            xs: '100%',\n            lg: '120%',\n          },\n          height: '100%',\n          left: 0,\n          top: 0,\n          zIndex: 0,\n        }}\n      ></Box>\n      <Box>\n        <Fab>\n          <FontAwesomeIcon icon={faSearch} />\n          搜尋此區域\n        </Fab>\n      </Box>\n    </>\n  );\n};\n\nexport default Map;\n","export const getUserPosition = () => {\n  return new Promise<GeolocationPosition>((res, rej) => {\n    navigator.geolocation.getCurrentPosition(res, rej);\n  });\n};\n","import { useState, FormEvent } from 'react';\nimport { Outlet, useNavigate } from 'react-router-dom';\nimport {\n  Paper,\n  Stack,\n  InputBase,\n  IconButton,\n  List,\n  Tooltip,\n  Fab,\n  MenuItem,\n  TextField,\n} from '@mui/material';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport {\n  faSearch,\n  faCrosshairs,\n  faExchangeAlt,\n} from '@fortawesome/free-solid-svg-icons';\nimport { IconProp } from '@fortawesome/fontawesome-svg-core';\nimport { getQueryString, getStation } from '../utils';\nimport NavTab from '../components/NavTab';\nimport stationCity from '../assets/data/station-city.json';\nimport Map from '../components/Map';\n\ntype TIconProps = {\n  icon: IconProp;\n  title: string;\n  onClick?: () => void;\n};\n\nconst SidebarIcon = ({ icon, title, onClick }: TIconProps) => {\n  return (\n    <Tooltip title={title} placement=\"right\">\n      <Fab\n        onClick={onClick}\n        color=\"primary\"\n        sx={{\n          fontSize: { xs: '1rem', md: '1.3rem' },\n          width: { xs: '40px', md: '50px' },\n          height: { xs: '40px', md: '50px' },\n        }}\n      >\n        <FontAwesomeIcon icon={icon} />\n      </Fab>\n    </Tooltip>\n  );\n};\ntype TBikeData = {\n  id: string;\n  name: string;\n  lat: number;\n  lng: number;\n  rentBike: number;\n  returnBike: number;\n  time: string;\n  status: number;\n};\n\ntype TProps = {\n  handleData: (type: 'station' | 'bike', data: TBikeData[]) => void;\n};\n\nconst Home = ({ handleData }: TProps) => {\n  const [data, setData] = useState<TBikeData[] | null>(null);\n  // control select\n  const [city, setCity] = useState('Taipei');\n  // control sidebar\n  const [hide, setHide] = useState(false);\n  const handleHide = () => {\n    setHide(!hide);\n  };\n\n  // control form submit\n  const navigation = useNavigate();\n  const [query, setQuery] = useState<string>('');\n  const handleSubmit = (e: FormEvent) => {\n    e.preventDefault();\n    navigation({\n      search: getQueryString({\n        lat: 25.02487262639445,\n        lng: 121.5689479334554,\n      }),\n    });\n    getStation({ city, query }).then((res) => {\n      handleData('station', res);\n      setData(res);\n    });\n  };\n\n  return (\n    <>\n      <Map data={data} />\n      <Stack\n        direction=\"column\"\n        spacing={2}\n        sx={{\n          position: 'absolute',\n          top: 0,\n          left: {\n            xs: hide ? 'calc(-100vw + 56px)' : 0,\n            md: hide ? '-500px' : 0,\n          },\n          width: {\n            xs: 'calc(100vw - 56px)',\n            md: '500px',\n          },\n          height: '100%',\n          p: 2,\n          transition: '500ms ease-in-out',\n          zIndex: 1,\n        }}\n      >\n        <Paper\n          elevation={3}\n          component=\"form\"\n          sx={{ display: 'flex', alignItems: 'center', p: 1 }}\n          onSubmit={handleSubmit}\n        >\n          <TextField\n            id=\"city-selet\"\n            label=\"選擇縣市\"\n            value={city}\n            select\n            sx={{ flex: 1 }}\n            color=\"primary\"\n            onChange={(e) => setCity(e.target.value)}\n          >\n            {stationCity.map((ele) => (\n              <MenuItem value={ele.value} key={ele.id}>\n                {ele.id}\n              </MenuItem>\n            ))}\n          </TextField>\n          <InputBase\n            placeholder=\"地址或站名搜尋\"\n            sx={{ color: 'primary.main', flex: 2, px: 2 }}\n            value={query}\n            required\n            onChange={(e) => setQuery(e.target.value)}\n          />\n          <IconButton type=\"submit\" color=\"primary\">\n            <FontAwesomeIcon icon={faSearch} />\n          </IconButton>\n        </Paper>\n        <Paper\n          sx={{ bgcolor: '#fff', flexGrow: 1, overflow: 'auto' }}\n          elevation={3}\n        >\n          <NavTab />\n          <List>\n            <Outlet />\n          </List>\n        </Paper>\n        <Stack\n          direction=\"column\"\n          spacing={2}\n          sx={{\n            position: 'absolute',\n            right: {\n              xs: hide ? '-50px' : '-40px',\n              md: hide ? '-60px' : '-50px',\n            },\n            top: 0,\n          }}\n        >\n          <SidebarIcon icon={faSearch} title=\"搜尋地址\" onClick={handleHide} />\n          <SidebarIcon\n            icon={faExchangeAlt}\n            title=\"收合邊欄\"\n            onClick={handleHide}\n          />\n          <SidebarIcon icon={faCrosshairs} title=\"我的位置\" />\n        </Stack>\n      </Stack>\n    </>\n  );\n};\n\nexport default Home;\n","export default __webpack_public_path__ + \"static/media/404.646d6db6.svg\";","import { Box, styled } from '@mui/material';\nimport PageNotFound from '../assets/image/404.svg';\n\nconst ImageContainer = styled('div')`\n  max-width: 700px;\n  margin-bottom: 3rem;\n\n  > img {\n    width: 100%;\n    height: 100%;\n    object-fit: contain;\n  }\n`;\n\nconst ErrorPage = () => {\n  return (\n    <Box\n      sx={{\n        position: 'relative',\n        height: 'calc(100vh - 76px)',\n        bgcolor: 'primary.light',\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        flexFlow: 'column nowrap',\n        overflow: 'hidden',\n      }}\n    >\n      <ImageContainer>\n        <img src={PageNotFound} alt=\"404\" />\n      </ImageContainer>\n    </Box>\n  );\n};\n\nexport default ErrorPage;\n","import { useNavigate } from 'react-router-dom';\nimport {\n  Typography,\n  Stack,\n  ListItem,\n  Card,\n  CardActionArea,\n  CardContent,\n  Divider,\n  Box,\n} from '@mui/material';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport {\n  faBicycle,\n  faParking,\n  faCheckCircle,\n} from '@fortawesome/free-solid-svg-icons';\nimport { getQueryString } from '../utils/getQueryString';\n\ntype TProps = {\n  id: string;\n  name: string;\n  lat: number;\n  lng: number;\n  rentBike: number;\n  returnBike: number;\n  time: string;\n  status: number;\n};\n\nconst StationCard = ({\n  name,\n  lat,\n  lng,\n  rentBike,\n  returnBike,\n  time,\n  status,\n}: TProps) => {\n  const navigation = useNavigate();\n  const handleClick = () => {\n    navigation(\n      { search: getQueryString({ lat, lng }) },\n      { state: { search: true } },\n    );\n  };\n  return (\n    <>\n      <ListItem>\n        <Card sx={{ width: '100%', boxShadow: 'none' }} onClick={handleClick}>\n          <CardActionArea sx={{ color: 'primary.main' }}>\n            <CardContent sx={{ py: 1 }}>\n              <Typography variant=\"h5\" color=\"primary\" sx={{ mb: 2 }}>\n                {name}\n              </Typography>\n              <Stack direction=\"row\" spacing={2} sx={{ mb: 2 }}>\n                <Box\n                  sx={{\n                    flexGrow: 1,\n                    backgroundColor: 'primary.light',\n                    textAlign: 'center',\n                    p: 1,\n                    borderRadius: 2,\n                  }}\n                >\n                  <Typography variant=\"body1\" color=\"primary.dark\">\n                    <FontAwesomeIcon icon={faBicycle} fixedWidth />\n                    可租借\n                  </Typography>\n                  <Typography variant=\"body1\" color=\"primary.dark\">\n                    {rentBike}\n                  </Typography>\n                </Box>\n                <Box\n                  sx={{\n                    flexGrow: 1,\n                    backgroundColor: 'error.light',\n                    textAlign: 'center',\n                    p: 1,\n                    borderRadius: 2,\n                  }}\n                >\n                  <Typography variant=\"body1\" color=\"error.dark\">\n                    <FontAwesomeIcon icon={faParking} fixedWidth />\n                    可還車\n                  </Typography>\n                  <Typography variant=\"body1\" color=\"error.dark\">\n                    {returnBike}\n                  </Typography>\n                </Box>\n              </Stack>\n              <Stack\n                direction=\"row\"\n                justifyContent=\"space-between\"\n                alignItems=\"center\"\n              >\n                <Typography\n                  variant=\"body1\"\n                  color=\"warning.main\"\n                  sx={{\n                    borderColor: 'warning.main',\n                    border: 1,\n                    borderRadius: 1,\n                    p: 1,\n                  }}\n                >\n                  可借可還\n                </Typography>\n                <Typography variant=\"body1\" color=\"primary.main\">\n                  <FontAwesomeIcon icon={faCheckCircle} fixedWidth />\n                  {status === 1 ? '正常營運' : '暫停營運'}\n                </Typography>\n              </Stack>\n            </CardContent>\n          </CardActionArea>\n        </Card>\n      </ListItem>\n      <Divider variant=\"middle\" />\n    </>\n  );\n};\n\nexport default StationCard;\n","import StationCard from '../components/StationCard';\nimport { Typography } from '@mui/material';\n\ntype TBikeData = {\n  id: string;\n  name: string;\n  lat: number;\n  lng: number;\n  rentBike: number;\n  returnBike: number;\n  time: string;\n  status: number;\n};\n\ntype TProps = {\n  data: TBikeData[] | null;\n};\n\nconst Station = ({ data }: TProps) => {\n  return (\n    <>\n      {data ? (\n        data.map((ele) => <StationCard {...ele} key={ele.id} />)\n      ) : (\n        <Typography\n          variant=\"h3\"\n          color=\"warning\"\n          sx={{ textAlign: 'center', py: 2 }}\n        >\n          沒有搜尋結果\n        </Typography>\n      )}\n    </>\n  );\n};\n\nexport default Station;\n","export default __webpack_public_path__ + \"static/media/fix.90910cae.svg\";","import fix from '../assets/image/fix.svg';\nimport styled from '@emotion/styled';\n\nconst Image = styled.div`\n  padding: 3rem;\n\n  > img {\n    width: 100%;\n    height: 100%;\n    object-fit: contain;\n  }\n`;\nconst Bike = () => {\n  return (\n    <div>\n      <Image>\n        <img src={fix} alt=\"fix\" />\n      </Image>\n    </div>\n  );\n};\n\nexport default Bike;\n","import fix from '../assets/image/fix.svg';\nimport styled from '@emotion/styled';\n\nconst Image = styled.div`\n  padding: 3rem;\n\n  > img {\n    width: 100%;\n    height: 100%;\n    object-fit: contain;\n  }\n`;\nconst Attraction = () => {\n  return (\n    <div>\n      <Image>\n        <img src={fix} alt=\"fix\" />\n      </Image>\n    </div>\n  );\n};\n\nexport default Attraction;\n","import { useState } from 'react';\nimport { styled } from '@mui/material';\nimport { Routes, Route } from 'react-router-dom';\nimport Header from './components/Header';\nimport Home from './views/Home';\nimport ErrorPage from './views/ErrorPage';\nimport Station from './views/Station';\nimport Bike from './views/Bike';\nimport Attraction from './views/Attractions';\n\nconst Page = styled('section')`\n  position: relative;\n  width: 100vw;\n  height: calc(100vh - 76px);\n  overflow: hidden;\n`;\n\ntype TBikeData = {\n  id: string;\n  name: string;\n  lat: number;\n  lng: number;\n  rentBike: number;\n  returnBike: number;\n  time: string;\n  status: number;\n};\n\ntype TData = {\n  station: TBikeData[] | null;\n};\n\nconst App = () => {\n  const [data, setData] = useState<TData>({ station: null });\n  const handleData = (type: 'station' | 'bike', data: TBikeData[]) => {\n    switch (type) {\n      case 'station':\n        setData({ ...data, station: data });\n        break;\n      default:\n        break;\n    }\n  };\n  return (\n    <>\n      <Header />\n      <Page>\n        <Routes>\n          <Route path=\"map\" element={<Home handleData={handleData} />}>\n            <Route index element={<Station data={data.station} />} />\n            <Route path=\"station\" element={<Station data={data.station} />} />\n            <Route path=\"bike\" element={<Bike />} />\n            <Route path=\"attraction\" element={<Attraction />} />\n          </Route>\n          <Route path=\"*\" element={<ErrorPage />} />\n        </Routes>\n      </Page>\n    </>\n  );\n};\n\nexport default App;\n","import { css } from '@emotion/react';\n\nconst global = css`\n  html,\n  body,\n  div,\n  span,\n  applet,\n  object,\n  iframe,\n  h1,\n  h2,\n  h3,\n  h4,\n  h5,\n  h6,\n  p,\n  blockquote,\n  pre,\n  a,\n  abbr,\n  acronym,\n  address,\n  big,\n  cite,\n  code,\n  del,\n  dfn,\n  em,\n  img,\n  ins,\n  kbd,\n  q,\n  s,\n  samp,\n  small,\n  strike,\n  strong,\n  sub,\n  sup,\n  tt,\n  var,\n  b,\n  u,\n  i,\n  center,\n  dl,\n  dt,\n  dd,\n  ol,\n  ul,\n  li,\n  fieldset,\n  form,\n  label,\n  legend,\n  table,\n  caption,\n  tbody,\n  tfoot,\n  thead,\n  tr,\n  th,\n  td,\n  article,\n  aside,\n  canvas,\n  details,\n  embed,\n  figure,\n  figcaption,\n  footer,\n  header,\n  hgroup,\n  menu,\n  nav,\n  output,\n  ruby,\n  section,\n  summary,\n  time,\n  mark,\n  audio,\n  video {\n    margin: 0;\n    padding: 0;\n    border: 0;\n    font-size: 100%;\n    font: inherit;\n    vertical-align: baseline;\n  }\n  article,\n  aside,\n  details,\n  figcaption,\n  figure,\n  footer,\n  header,\n  hgroup,\n  menu,\n  nav,\n  section {\n    display: block;\n  }\n  body {\n    line-height: 1;\n  }\n  ol,\n  ul {\n    list-style: none;\n  }\n  blockquote,\n  q {\n    quotes: none;\n  }\n  blockquote:before,\n  blockquote:after,\n  q:before,\n  q:after {\n    content: '';\n    content: none;\n  }\n  table {\n    border-collapse: collapse;\n    border-spacing: 0;\n  }\n\n  html,\n  body {\n    font-family: 'Noto Sans TC';\n  }\n\n  *,\n  *::before,\n  *::after {\n    box-sizing: border-box;\n  }\n`;\n\nexport default global;\n","import { createTheme } from '@mui/material/styles';\n\nconst primary = {\n  main: '#738047',\n  light: '#DFE4CE',\n  dark: '#474F2C',\n};\n\nconst theme = createTheme({\n  palette: {\n    primary,\n    warning: {\n      main: '#DE994A',\n      light: '#FAF0E5',\n      dark: '#C67A24',\n    },\n    error: {\n      main: '#E75578',\n      light: '#F7D4DD',\n      dark: '#BC3253',\n    },\n    secondary: {\n      main: '#9A9A9A',\n      dark: '#767676',\n      light: '#EEEEEE',\n    },\n  },\n  typography: {\n    fontFamily: 'Noto Sans TC',\n    h1: {\n      color: primary.dark,\n      fontSize: '2.448rem',\n      fontWeight: '700',\n    },\n    h2: {\n      color: primary.dark,\n      fontSize: '2.074rem',\n      fontWeight: '700',\n    },\n    h3: {\n      color: primary.dark,\n      fontSize: '1.728rem',\n      fontWeight: '700',\n    },\n    h4: {\n      color: primary.dark,\n      fontSize: '1.44rem',\n      fontWeight: '700',\n    },\n    h5: {\n      color: primary.dark,\n      fontSize: '1.2rem',\n      fontWeight: '700',\n    },\n    body1: {\n      fontSize: '1.1rem',\n      fontWeight: '500',\n    },\n    button: {\n      fontSize: '0.833rem',\n    },\n    caption: {\n      fontSize: '0.694rem',\n      fontWeight: '400',\n    },\n  },\n  components: {\n    MuiButton: {\n      styleOverrides: {\n        // root: {\n        //   color: primary.main,\n        //   boxShadow: 'none',\n        // },\n        // contained: {\n        //   backgroundColor: '#ffffff',\n        //   border: '1px solid #A4B375',\n        //   borderRadius: '8px',\n        //   '&:hover': {\n        //     boxShadow: 'none',\n        //     backgroundColor: primary.light,\n        //   },\n        // },\n      },\n    },\n  },\n});\n\nexport default theme;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport { Global } from '@emotion/react';\nimport { ThemeProvider as EPropsvider } from '@emotion/react';\nimport { ThemeProvider } from '@mui/material/styles';\nimport global from './style/global';\nimport theme from './style/theme';\nimport { HashRouter } from 'react-router-dom';\n\nReactDOM.render(\n  <React.StrictMode>\n    <HashRouter>\n      <EPropsvider theme={theme}>\n        <ThemeProvider theme={theme}>\n          <Global styles={global} />\n          <App />\n        </ThemeProvider>\n      </EPropsvider>\n    </HashRouter>\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}