(this["webpackJsonp2021-the-f2e-week-2"]=this["webpackJsonp2021-the-f2e-week-2"]||[]).push([[0],{138:function(e,n){},171:function(e,n,t){"use strict";t.r(n);var i,r,c,o,a,s,l,j,d,b,h,x=t(0),u=t.n(x),f=t(38),p=t.n(f),O=t(16),m=t(8),g=t(13),y=t.p+"static/media/logo-light.0c6a71ad.svg",v=t(1),w=Object(m.a)("header")(i||(i=Object(O.a)(["\n  height: 76px;\n  display: flex;\n  flex-flow: row nowrap;\n  justify-content: center;\n  align-items: center;\n  background-color: ",";\n"])),(function(e){return e.theme.palette.primary.main})),k=Object(m.a)("div")(r||(r=Object(O.a)(["\n  > img {\n    height: 100%;\n    object-fit: contain;\n  }\n"]))),C=function(){return Object(v.jsx)(w,{children:Object(v.jsx)(k,{children:Object(v.jsx)("img",{src:y,alt:"logo"})})})},S=t(9),A=t(205),E=t(212),B=t(204),z=t(213),F=t(208),I=t(214),T=t(215),D=t(21),_=t(18),N=t(92),q=function(e){return Object(N.stringify)(e)},W=t(54),R=t.n(W),L=function(e,n){return{STATION_URL:"https://ptx.transportdata.tw/MOTC/v2/Bike/Station/NearBy?$spatialFilter=nearby(".concat(e,"%2C%20").concat(n,"%2C%201000)&$format=JSON"),INFO_URL:"https://ptx.transportdata.tw/MOTC/v2/Bike/Availability/NearBy?$spatialFilter=nearby(".concat(e,"%2C%20").concat(n,"%2C%201000)&$format=JSON")}},M=t(93),G=t(36),P=t.n(G),U=function(){var e=(new Date).toUTCString(),n=Object(M.HmacSHA1)("x-date: ".concat(e),"4K3HZyLebCmkAcnb8gxLJEWBpRk"),t=P.a.stringify(n);return{Authorization:'hmac username="'.concat("645498ddf8ab4b9eaf56c36297be40e2",'", algorithm="hmac-sha1", headers="x-date", signature="').concat(t,'"'),"X-Date":e}},J=t(206),Z=t(211),$=function(){var e=Object(x.useState)("station"),n=Object(S.a)(e,2),t=n[0],i=n[1];return Object(v.jsxs)(J.a,{value:t,variant:"fullWidth",TabIndicatorProps:{style:{height:"3px"}},onChange:function(e,n){i(n)},children:[Object(v.jsx)(Z.a,{icon:Object(v.jsx)(D.a,{icon:_.a}),label:"\u81ea\u884c\u8eca\u79df\u501f\u7ad9",value:"station"}),Object(v.jsx)(Z.a,{icon:Object(v.jsx)(D.a,{icon:_.g}),label:"\u81ea\u884c\u8eca\u8def\u7dda",value:"bike"}),Object(v.jsx)(Z.a,{icon:Object(v.jsx)(D.a,{icon:_.i}),label:"\u666f\u9ede",value:"attraction"})]})},H=function(e){var n=e.icon,t=e.title,i=e.onClick;return Object(v.jsx)(A.a,{title:t,placement:"right",children:Object(v.jsx)(E.a,{onClick:i,color:"primary",sx:{fontSize:{xs:"1rem",md:"1.3rem"},width:{xs:"40px",md:"50px"},height:{xs:"40px",md:"50px"}},children:Object(v.jsx)(D.a,{icon:n})})})},X=function(){var e=Object(x.useState)(!1),n=Object(S.a)(e,2),t=n[0],i=n[1],r=function(){i(!t)},c=Object(g.g)(),o=Object(x.useState)(""),a=Object(S.a)(o,2),s=a[0],l=a[1];return Object(v.jsxs)(B.a,{direction:"column",spacing:2,sx:{position:"absolute",top:0,left:{xs:t?"calc(-100vw + 56px)":0,md:t?"-500px":0},width:{xs:"calc(100vw - 56px)",md:"500px"},height:"100%",p:2,transition:"500ms ease-in-out",zIndex:1},children:[Object(v.jsxs)(z.a,{elevation:3,component:"form",sx:{display:"flex",alignItems:"center",p:1},onSubmit:function(e){e.preventDefault(),c({search:q({lat:25.02487262639445,lng:121.5689479334554})},{state:{search:!0}})},children:[Object(v.jsx)(F.a,{placeholder:"\u5730\u5740\u641c\u5c0b",sx:{color:"primary.main",flex:1,px:2},value:s,onChange:function(e){return l(e.target.value)}}),Object(v.jsx)(I.a,{type:"submit",color:"primary",children:Object(v.jsx)(D.a,{icon:_.h})})]}),Object(v.jsxs)(z.a,{sx:{bgcolor:"#fff",flexGrow:1,overflow:"auto"},elevation:3,children:[Object(v.jsx)($,{}),Object(v.jsx)(T.a,{children:Object(v.jsx)(g.a,{})})]}),Object(v.jsxs)(B.a,{direction:"column",spacing:2,sx:{position:"absolute",right:{xs:t?"-50px":"-40px",md:t?"-60px":"-50px"},top:0},children:[Object(v.jsx)(H,{icon:_.h,title:"\u641c\u5c0b\u5730\u5740",onClick:r}),Object(v.jsx)(H,{icon:_.e,title:"\u6536\u5408\u908a\u6b04",onClick:r}),Object(v.jsx)(H,{icon:_.d,title:"\u6211\u7684\u4f4d\u7f6e"})]})]})},K=t(216),V=t.p+"static/media/404.646d6db6.svg",Q=Object(m.a)("div")(c||(c=Object(O.a)(["\n  max-width: 700px;\n  margin-bottom: 3rem;\n\n  > img {\n    width: 100%;\n    height: 100%;\n    object-fit: contain;\n  }\n"]))),Y=function(){return Object(v.jsx)(K.a,{sx:{position:"relative",height:"calc(100vh - 76px)",bgcolor:"primary.light",display:"flex",justifyContent:"center",alignItems:"center",flexFlow:"column nowrap",overflow:"hidden"},children:Object(v.jsx)(Q,{children:Object(v.jsx)("img",{src:V,alt:"404"})})})},ee=t(25),ne=t(209),te=t(217),ie=t(218),re=t(219),ce=t(220),oe=t(221),ae=function(){return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(ne.a,{children:Object(v.jsx)(te.a,{sx:{width:"100%",boxShadow:"none"},children:Object(v.jsx)(ie.a,{sx:{color:"primary.main"},children:Object(v.jsxs)(re.a,{sx:{py:1},children:[Object(v.jsx)(ce.a,{variant:"h5",color:"primary",sx:{mb:2},children:"\u592a\u539f\u5ee3\u5834"}),Object(v.jsxs)(B.a,{direction:"row",spacing:2,sx:{mb:2},children:[Object(v.jsxs)(K.a,{sx:{flexGrow:1,backgroundColor:"primary.light",textAlign:"center",p:1,borderRadius:2},children:[Object(v.jsxs)(ce.a,{variant:"body1",color:"primary.dark",children:[Object(v.jsx)(D.a,{icon:_.a,fixedWidth:!0}),"\u53ef\u79df\u501f"]}),Object(v.jsx)(ce.a,{variant:"body1",color:"primary.dark",children:"43"})]}),Object(v.jsxs)(K.a,{sx:{flexGrow:1,backgroundColor:"error.light",textAlign:"center",p:1,borderRadius:2},children:[Object(v.jsxs)(ce.a,{variant:"body1",color:"error.dark",children:[Object(v.jsx)(D.a,{icon:_.f,fixedWidth:!0}),"\u53ef\u9084\u8eca"]}),Object(v.jsx)(ce.a,{variant:"body1",color:"error.dark",children:"15"})]})]}),Object(v.jsxs)(B.a,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[Object(v.jsx)(ce.a,{variant:"body1",color:"warning.main",sx:{borderColor:"warning.main",border:1,borderRadius:1,p:1},children:"\u53ef\u501f\u53ef\u9084"}),Object(v.jsxs)(ce.a,{variant:"body1",color:"primary.main",children:[Object(v.jsx)(D.a,{icon:_.b,fixedWidth:!0}),"\u6b63\u5e38\u71df\u904b"]})]})]})})})}),Object(v.jsx)(oe.a,{variant:"middle"})]})},se=function(){return Object(v.jsx)(v.Fragment,{children:Object(ee.a)(Array(5)).map((function(e,n){return Object(v.jsx)(ae,{},n)}))})},le=function(){return Object(v.jsx)("div",{children:"\u81ea\u884c\u8eca\u8def\u7dda\u5efa\u7f6e\u4e2d"})},je=function(){return Object(v.jsx)("div",{children:"\u666f\u9ede\u641c\u5c0b\u5efa\u7f6e\u4e2d"})},de=t(98),be=t(55),he=t(35),xe=t.n(he),ue=(t(167),t(168),t(169),t(170),function(){return Object(v.jsxs)("svg",{width:"100%",height:"100%",viewBox:"0 0 80 80",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(v.jsx)("circle",{opacity:"0.2",cx:"37.5",cy:"37.5",r:"37.5",fill:"#DE994A"}),Object(v.jsx)("circle",{opacity:"0.2",cx:"37.5",cy:"37.4999",r:"26.5",fill:"#DE994A"}),Object(v.jsxs)("g",{filter:"url(#filter0_d_38_276)",children:[Object(v.jsx)("circle",{cx:"37.5",cy:"37.5",r:"13.5",fill:"#DE994A"}),Object(v.jsx)("circle",{cx:"37.5",cy:"37.5",r:"16",stroke:"white",strokeWidth:"5"})]}),Object(v.jsx)("defs",{children:Object(v.jsxs)("filter",{id:"filter0_d_38_276",x:"3",y:"3.00003",width:"77",height:"77",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[Object(v.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),Object(v.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),Object(v.jsx)("feOffset",{dx:"4",dy:"4"}),Object(v.jsx)("feGaussianBlur",{stdDeviation:"10"}),Object(v.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),Object(v.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.4625 0 0 0 0 0.4625 0 0 0 0 0.4625 0 0 0 0.3 0"}),Object(v.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_38_276"}),Object(v.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_38_276",result:"shape"})]})})]})}),fe=function(e){var n=e.quantity;return Object(v.jsxs)(K.a,{sx:{position:"relative"},children:[Object(v.jsxs)("svg",{width:"100%",height:"100%",viewBox:"0 0 58 77",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(v.jsx)("ellipse",{cx:"29",cy:"72.5",rx:"15",ry:"4.5",fill:n>5?"#A4B375":"#F27594"}),Object(v.jsx)("path",{d:"M28.8003 0C12.9207 0 0.000293201 12.9204 0.000293201 28.782C-0.104107 51.984 27.7059 71.2224 28.8003 72C28.8003 72 57.7047 51.984 57.6003 28.8C57.6003 12.9204 44.6799 0 28.8003 0ZM28.8003 43.2C20.8443 43.2 14.4003 36.756 14.4003 28.8C14.4003 20.844 20.8443 14.4 28.8003 14.4C36.7563 14.4 43.2003 20.844 43.2003 28.8C43.2003 36.756 36.7563 43.2 28.8003 43.2Z",fill:n>5?"#738047":"#E75578"}),Object(v.jsx)("circle",{cx:"29",cy:"29",r:"19",fill:"white"})]}),Object(v.jsx)(ce.a,{component:"span",sx:{fontSize:"1rem",color:n>5?"#738047":"#E75578",position:"absolute",left:"50%",top:"18%",transform:"translateX(-50%)",fontWeight:"700"},children:n})]})},pe=Object(m.a)("span")(o||(o=Object(O.a)(["\n  display: inline-flex;\n  width: 100%;\n  height: 100%;\n  border-radius: 50%;\n  justify-content: center;\n  align-items: center;\n  font-size: 1rem;\n  color: #fff;\n  background-color: #1e88e5;\n  font-weight: 700;\n  box-shadow: 0 0 0 3px #fff, 0 0 0 6px #1e88e5;\n"]))),Oe=function(e){var n=e.count;return Object(v.jsx)(K.a,{sx:{position:"relative",width:"100%",height:"100%"},children:Object(v.jsx)(pe,{children:n})})},me=t(40),ge=me.a.div(a||(a=Object(O.a)(["\n  width: 350px;\n  border-radius: 8px;\n  border: 2px solid #a4b375;\n  box-shadow: 0 0 20px rgba(118, 118, 118, 0.3);\n  background-color: #fff;\n  padding: 1rem 1.3rem;\n"]))),ye=me.a.h4(s||(s=Object(O.a)(["\n  font-size: 1rem;\n  font-weight: 500;\n  color: #738047;\n  margin-bottom: 0.5rem;\n"]))),ve=me.a.div(l||(l=Object(O.a)(["\n  flex-grow: 1;\n  background-color: ",";\n  color: ",";\n  border-radius: 4px;\n  padding: 0.5rem 0;\n  text-align: center;\n"])),(function(e){var n=e.quantity;return 0===n?"#EEEEEE":n>10?"#DFE4CE":"#F7D4DD"}),(function(e){var n=e.quantity;return 0===n?"#767676":n>10?"#474F2C":"#BC3253"})),we=me.a.time(j||(j=Object(O.a)(["\n  flex-grow: 1;\n  color: #767676;\n  text-align: right;\n"]))),ke=me.a.span(d||(d=Object(O.a)(["\n  font-size: 15px;\n  font-weight: 500;\n  font-family: 'Noto Sans TC';\n  padding-left: 0.3rem;\n"]))),Ce=function(e){var n=e.time,t=e.name,i=e.rentBike,r=e.returnBike;return Object(v.jsxs)(ge,{children:[Object(v.jsx)(ye,{children:t}),Object(v.jsxs)(B.a,{direction:"row",spacing:1,alignItems:"center",children:[Object(v.jsxs)(B.a,{direction:"row",spacing:1,sx:{flexGrow:3},children:[Object(v.jsxs)(ve,{quantity:i,children:[Object(v.jsx)(D.a,{icon:_.a}),Object(v.jsx)(ke,{children:i})]}),Object(v.jsxs)(ve,{quantity:r,children:[Object(v.jsx)(D.a,{icon:_.f}),Object(v.jsx)(ke,{children:r})]})]}),Object(v.jsxs)(we,{children:[Object(v.jsx)(D.a,{icon:_.c}),Object(v.jsx)(ke,{children:n})]})]})]})},Se=xe.a.divIcon({className:"user-mark",iconSize:[80,80],iconAnchor:[40,40],html:Object(be.renderToString)(Object(v.jsx)(ue,{}))}),Ae=function(){var e=Object(g.g)(),n=Object(x.useRef)(),t=Object(x.useRef)();return Object(x.useEffect)((function(){var i=xe.a.map("map",{zoomControl:!1});xe.a.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(i),i.setZoom(15),new Promise((function(e,n){navigator.geolocation.getCurrentPosition(e,n)})).then((function(e){i.setView([e.coords.latitude,e.coords.longitude],15),xe.a.marker([e.coords.latitude,e.coords.longitude],{icon:Se}).addTo(i);var n,r,c=xe.a.markerClusterGroup({iconCreateFunction:function(e){return xe.a.divIcon({className:"cluster-icon",iconSize:[30,30],iconAnchor:[15,15],html:Object(be.renderToString)(Object(v.jsx)(Oe,{count:e.getChildCount()}))})}});(n=e.coords.latitude,r=e.coords.longitude,R.a.all([R.a.get(L(n,r).STATION_URL,{headers:U()}),R.a.get(L(n,r).INFO_URL,{headers:U()})]).then(R.a.spread((function(e,n){return console.log(e),console.log(n),e.data.map((function(e){return{name:e.StationName.Zh_tw,lat:e.StationPosition.PositionLat,lng:e.StationPosition.PositionLon,rentBike:n.data.find((function(n){return n.StationID===e.StationID})).AvailableRentBikes,returnBike:n.data.find((function(n){return n.StationID===e.StationID})).AvailableReturnBikes,time:new Date(e.UpdateTime).toLocaleTimeString()}}))})))).then((function(e){e.forEach((function(e){var n;c.addLayer(xe.a.marker([e.lat,e.lng],{icon:(n=e.rentBike,xe.a.divIcon({className:"bike-icon",iconSize:[48,67],iconAnchor:[19,28.5],popupAnchor:[-175,-135],html:Object(be.renderToString)(Object(v.jsx)(fe,{quantity:n}))}))}).bindPopup(Object(be.renderToString)(Object(v.jsx)(Ce,Object(de.a)({},e))),{className:"cus-popup"}))}))})),t.current=c,i.addLayer(c)})).catch((function(){}));var r,c=function(){return setTimeout((function(){e({search:q({lat:i.getCenter().lat,lng:i.getCenter().lng})})}),500)};i.on("zoom",(function(){clearTimeout(r),r=c()})),i.on("drag",(function(){clearTimeout(r),r=c()})),n.current=i}),[e]),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(K.a,{id:"map",sx:{position:"relative",width:{xs:"100%",lg:"120%"},height:"100%",left:0,top:0,zIndex:0}}),Object(v.jsx)(K.a,{children:Object(v.jsxs)(E.a,{children:[Object(v.jsx)(D.a,{icon:_.h}),"\u641c\u5c0b\u6b64\u5340\u57df"]})})]})},Ee=Object(m.a)("section")(b||(b=Object(O.a)(["\n  position: relative;\n  width: 100vw;\n  height: calc(100vh - 76px);\n  overflow: hidden;\n"]))),Be=function(){return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(C,{}),Object(v.jsxs)(Ee,{children:[Object(v.jsxs)(g.d,{children:[Object(v.jsxs)(g.b,{path:"/",element:Object(v.jsx)(X,{}),children:[Object(v.jsx)(g.b,{path:"/",element:Object(v.jsx)(se,{})}),Object(v.jsx)(g.b,{path:"station",element:Object(v.jsx)(se,{})}),Object(v.jsx)(g.b,{path:"bike",element:Object(v.jsx)(le,{})}),Object(v.jsx)(g.b,{path:"attraction",element:Object(v.jsx)(je,{})})]}),Object(v.jsx)(g.b,{path:"*",element:Object(v.jsx)(Y,{})})]}),Object(v.jsx)(Ae,{})]})]})},ze=t(28),Fe=t(20),Ie=t(210),Te=Object(ze.b)(h||(h=Object(O.a)(["\n  html,\n  body,\n  div,\n  span,\n  applet,\n  object,\n  iframe,\n  h1,\n  h2,\n  h3,\n  h4,\n  h5,\n  h6,\n  p,\n  blockquote,\n  pre,\n  a,\n  abbr,\n  acronym,\n  address,\n  big,\n  cite,\n  code,\n  del,\n  dfn,\n  em,\n  img,\n  ins,\n  kbd,\n  q,\n  s,\n  samp,\n  small,\n  strike,\n  strong,\n  sub,\n  sup,\n  tt,\n  var,\n  b,\n  u,\n  i,\n  center,\n  dl,\n  dt,\n  dd,\n  ol,\n  ul,\n  li,\n  fieldset,\n  form,\n  label,\n  legend,\n  table,\n  caption,\n  tbody,\n  tfoot,\n  thead,\n  tr,\n  th,\n  td,\n  article,\n  aside,\n  canvas,\n  details,\n  embed,\n  figure,\n  figcaption,\n  footer,\n  header,\n  hgroup,\n  menu,\n  nav,\n  output,\n  ruby,\n  section,\n  summary,\n  time,\n  mark,\n  audio,\n  video {\n    margin: 0;\n    padding: 0;\n    border: 0;\n    font-size: 100%;\n    font: inherit;\n    vertical-align: baseline;\n  }\n  article,\n  aside,\n  details,\n  figcaption,\n  figure,\n  footer,\n  header,\n  hgroup,\n  menu,\n  nav,\n  section {\n    display: block;\n  }\n  body {\n    line-height: 1;\n  }\n  ol,\n  ul {\n    list-style: none;\n  }\n  blockquote,\n  q {\n    quotes: none;\n  }\n  blockquote:before,\n  blockquote:after,\n  q:before,\n  q:after {\n    content: '';\n    content: none;\n  }\n  table {\n    border-collapse: collapse;\n    border-spacing: 0;\n  }\n\n  html,\n  body {\n    font-family: 'Noto Sans TC';\n  }\n\n  *,\n  *::before,\n  *::after {\n    box-sizing: border-box;\n  }\n"]))),De=t(99),_e={main:"#738047",light:"#DFE4CE",dark:"#474F2C"},Ne=Object(De.a)({palette:{primary:_e,warning:{main:"#DE994A",light:"#FAF0E5",dark:"#C67A24"},error:{main:"#E75578",light:"#F7D4DD",dark:"#BC3253"},secondary:{main:"#9A9A9A",dark:"#767676",light:"#EEEEEE"}},typography:{fontFamily:"Noto Sans TC",h1:{color:_e.dark,fontSize:"2.448rem",fontWeight:"700"},h2:{color:_e.dark,fontSize:"2.074rem",fontWeight:"700"},h3:{color:_e.dark,fontSize:"1.728rem",fontWeight:"700"},h4:{color:_e.dark,fontSize:"1.44rem",fontWeight:"700"},h5:{color:_e.dark,fontSize:"1.2rem",fontWeight:"700"},body1:{fontSize:"1.1rem",fontWeight:"500"},button:{fontSize:"0.833rem"},caption:{fontSize:"0.694rem",fontWeight:"400"}},components:{MuiButton:{styleOverrides:{}}}}),qe=t(48);p.a.render(Object(v.jsx)(u.a.StrictMode,{children:Object(v.jsx)(qe.a,{children:Object(v.jsx)(Fe.c,{theme:Ne,children:Object(v.jsxs)(Ie.a,{theme:Ne,children:[Object(v.jsx)(ze.a,{styles:Te}),Object(v.jsx)(Be,{})]})})})}),document.getElementById("root"))}},[[171,1,2]]]);
//# sourceMappingURL=main.e8d92cb3.chunk.js.map